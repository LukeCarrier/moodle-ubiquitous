{%
  set php = salt['grains.filter_by']({
    '16.04': {
      'packages': [
        'php7.0-dev',
        'php7.0-cli',
        'php7.0-curl',
        'php7.0-fpm',
        'php7.0-gd',
        'php7.0-gmp',
        'php7.0-intl',
        'php7.0-json',
        'php7.0-mbstring',
        'php7.0-mcrypt',
        'php7.0-opcache',
        'php7.0-pgsql',
        'php7.0-soap',
        'php7.0-xml',
        'php7.0-xmlrpc',
        'php7.0-zip',
      ],
      'fpm': {
        'log_acl': [],
      },
      'sqlsrv': {
        'packages': [
          'msodbcsql',
          'msodbcsql17',
        ],
        'debconf': {
          'msodbcsql': {
            'msodbcsql/accept_eula': {
              'type': 'boolean',
              'value': True,
            },
          },
          'msodbcsql17': {
            'msodbcsql/accept_eula': {
              'type': 'boolean',
              'value': True,
            },
          },
        },
      },
      'versions': {
        '7.0': {
          'extension_api_version': '20151012',
        },
      },
    },
    '18.04': {
      'packages': [
        'php7.2-dev',
        'php7.2-cli',
        'php7.2-curl',
        'libcurl4',
        'php7.2-fpm',
        'php7.2-gd',
        'php7.2-gmp',
        'php7.2-intl',
        'php7.2-json',
        'php7.2-mbstring',
        'php7.2-opcache',
        'php7.2-pgsql',
        'php7.2-soap',
        'php7.2-xml',
        'php7.2-xmlrpc',
        'php7.2-zip',
      ],
      'fpm': {
        'log_acl': [],
      },
      'sqlsrv': {
        'packages': [
          'msodbcsql17',
        ],
        'debconf': {
          'msodbcsql17': {
            'msodbcsql17/accept_eula': {
              'type': 'boolean',
              'value': True,
            },
          },
        },
      },
      'versions': {
        '7.2': {
          'extension_api_version': '20170718',
        },
      },
    },
  }, grain='osrelease', merge=salt['pillar.get']('php'))
%}
